{% load static %}

<header class="sticky top-0 z-50 backdrop-blur-xl border-b border-white/10 text-white bg-black/30 shadow-lg">

    <div class="mx-auto px-4 sm:px-6 md:px-8 py-2 md:py-4 sm:py-5">
        {% if user.is_authenticated %}
            <div class="flex items-center justify-between gap-2 sm:gap-4">

                <a href="{% url 'home' %}">
                    <div class="flex items-center gap-2 sm:gap-3 w-90">
                        <h1 class="gradient-text text-lg sm:text-xl md:text-2xl font-bold tracking-wider">
                            Morpheus Env
                        </h1>
                    </div>
                </a>

                <div class="hidden md:flex flex-row items-center justify-end gap-2 sm:gap-3 md:gap-6">
                    <p class="text-xs sm:text-sm md:text-xl text-right">
                        Ol치, <span class="font-semibold text-purple-300">{{ user.first_name|default:'usu치rio' }}</span>!
                    </p>
                    <div class="flex items-center gap-2 sm:gap-3 md:gap-4">
                        {% if user.is_staff %}
                            <a href="{% url 'admin:index' %}" class="header-admin-btn" target="_blank">
                                <i class="bi bi-gear-fill"></i> Admin
                            </a>
                        {% endif %}
                        <form method="post" action="{% url 'logout' %}" class="inline">
                            {% csrf_token %}
                            <button class="header-logout-btn"></i> Sair
                            </button>
                        </form>
                        <a href="{% url 'user_detail' user.pk %}">
                            <div class="avatar hover:text-purple-300 transition">
                                <i class="bi bi-person-circle icon-medium"></i>
                            </div>
                        </a>
                    </div>
                </div>

                <div class="md:hidden drawer drawer-end justify-end">
                    <input id="mobile-menu" type="checkbox" class="drawer-toggle"/>
                    <div class="drawer-content">
                        <label for="mobile-menu" class="btn btn-ghost btn-circle">
                            <i class="bi bi-list icon-large text-white"></i>
                        </label>
                    </div>
                    <div class="drawer-side">
                        <label for="mobile-menu" aria-label="close sidebar" class="drawer-overlay"></label>
                        <div class="menu min-h-full w-80 p-0 bg-system border-l border-white/20">
                            <div class="p-6 border-b border-white/10">
                                <div class="flex items-center justify-between mb-4">
                                    <h2 class="text-2xl font-bold gradient-text">
                                        Menu
                                    </h2>
                                    <label for="mobile-menu" class="btn btn-ghost btn-sm btn-circle">
                                        <i class="bi bi-x-lg text-xl text-white"></i>
                                    </label>
                                </div>
                                <p class="text-sm text-gray-300">
                                    Ol치, <span class="font-semibold text-purple-300">{{ user.first_name|default:'usu치rio' }}</span>!
                                </p>
                            </div>
                            <ul class="p-4 space-y-2">
                                <li>
                                    <a href="{% url 'user_detail' user.pk %}" class="mobile-menu-item-purple">
                                        <i class="bi bi-person-circle icon-large text-purple-300"></i>
                                        <span class="text-sm text-white">Seu Perfil</span>
                                    </a>
                                </li>
                                
                                {% if user.is_staff %}
                                    <li>
                                        <a href="{% url 'admin:index' %}" target="_blank" class="mobile-menu-item-blue">
                                            <i class="bi bi-gear-fill icon-large text-blue-300"></i>
                                            <span class="text-sm text-white">Admin</span>
                                        </a>
                                    </li>
                                {% endif %}
                                
                                <li>
                                    <form method="post" action="{% url 'logout' %}" class="mobile-menu-item-red">
                                        {% csrf_token %}
                                        <button type="submit" class="flex items-center gap-4">
                                            <i class="bi bi-box-arrow-right icon-large text-red-300"></i>
                                            <span class="text-sm text-white">Sair</span>
                                        </button>
                                    </form>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="flex items-center justify-center">
                <div class="flex items-center gap-2 sm:gap-3">
                    <h1 class="text-lg sm:text-xl md:text-2xl font-bold tracking-wider bg-gradient-to-r from-purple-300 to-pink-300 bg-clip-text text-transparent">
                        Morpheus Env
                    </h1>
                </div>
            </div>  
        {% endif %}
        
    </div>
</header>
